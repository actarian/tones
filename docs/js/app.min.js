!function(){"use strict";var e,t,n,o,a,r,i,s,d,l,u,p=new Tone.Volume(-100),c=(e=p,(t=new Tone.Synth({oscillator:{type:"amtriangle",harmonicity:.5,modulationType:"sine"},envelope:{attackCurve:"exponential",attack:.05,decay:.2,sustain:.2,release:1.5},portamento:.05})).chain(e,Tone.Master),function(){var e=new Tone.Compressor({threshold:-30,ratio:6,attack:.3,release:.1}).toMaster(),t=new Tone.Distortion({distortion:.4,wet:.4}),n=new Tone.Player({url:"audio/505/hh.[mp3|ogg]",volume:-10,retrigger:!0,fadeOut:.05}).chain(t,e);n.loop=new Tone.Loop({callback:function(e){n.start(e).stop(e+.05)},interval:"16n",probability:.8}).start("1m");var o=new Tone.Player({url:"audio/505/snare.[mp3|ogg]",retrigger:!0,fadeOut:.1}).chain(t,e);o.part=new Tone.Sequence(function(e,t){o.volume.value=Tone.gainToDb(t),o.start(e).stop(e+.1)},[null,1,null,[1,.3]]).start(0);var a=new Tone.MembraneSynth({pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.2,sustain:0}}).connect(e);a.part=new Tone.Sequence(function(e,t){Math.random()<t&&a.triggerAttack("C1",e)},[1,[1,[null,.3]],1,[1,[null,.5]],1,1,1,[1,[null,.8]]],"2n").start(0);var r=new Tone.FMSynth({harmonicity:1,modulationIndex:3.5,carrier:{oscillator:{type:"custom",partials:[0,1,0,2]},envelope:{attack:.08,decay:.3,sustain:0}},modulator:{oscillator:{type:"square"},envelope:{attack:.1,decay:.2,sustain:.3,release:.01}}}).toMaster();r.part=new Tone.Part(function(e,t){Math.random()<t.prob&&r.triggerAttackRelease(t.note,t.dur,e)},[{time:"0:0",note:"C2",dur:"4n.",prob:1},{time:"0:2",note:"C2",dur:"8n",prob:.6},{time:"0:2.6666",note:"C2",dur:"8n",prob:.4},{time:"0:3.33333",note:"C2",dur:"8n",prob:.9},{time:"1:0",note:"C2",dur:"4n.",prob:1},{time:"1:2",note:"C2",dur:"8n",prob:.6},{time:"1:2.6666",note:"C2",dur:"8n",prob:.4},{time:"1:3.33333",note:"E2",dur:"8n",prob:.9},{time:"2:0",note:"F2",dur:"4n.",prob:1},{time:"2:2",note:"F2",dur:"8n",prob:.6},{time:"2:2.6666",note:"F2",dur:"8n",prob:.4},{time:"2:3.33333",note:"F2",dur:"8n",prob:.9},{time:"3:0",note:"F2",dur:"4n.",prob:1},{time:"3:2",note:"F2",dur:"8n",prob:.6},{time:"3:2.6666",note:"F2",dur:"8n",prob:.4},{time:"3:3.33333",note:"B1",dur:"8n",prob:.9}]).start(0),r.part.loop=!0,r.part.loopEnd="4m";var i=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:5,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();return i.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],i.note=i.notes[0],Tone.Transport.bpm.value=1,{effects:{compressor:e,distortion:t},instruments:{hats:n,snare:o,kick:a,bass:r,synth:i},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.stop()},theremin:{drag:function(e,t){e=Math.max(0,Math.min(1,e)),t=Math.max(0,Math.min(1,t));var n=i.notes[Math.round(e*i.notes.length-1)];i.note!==n&&(i.note=n,i.setNote(n)),i.vibratoAmount.value=2*t},start:function(){i.triggerAttack(i.note)},stop:function(){i.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),Tone.Transport.bpm.value=1+Math.round(124*e)}}}()),m=[],h=[];o=new THREE.Scene,(n=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,20,40),n.lookAt(0,0,0),o.add(n),s=new THREE.BoxGeometry(10,10,10),d=new THREE.MeshNormalMaterial,l=new THREE.Mesh(s,d),o.add(l),m.push(l),s=new THREE.BoxGeometry(3,3,3),d=new THREE.MeshNormalMaterial,(u=new THREE.Mesh(s,d)).position.set(0,-8,0),o.add(u),h.push(u),(a=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setSize(window.innerWidth,window.innerHeight),document.querySelector(".section-scene").appendChild(a.domElement),(r=new THREE.OrbitControls(n)).update(),(i=new THREE.DragControls(h,n,a.domElement)).addEventListener("dragstart",function(e){r.enabled=!1,c.start(),c.theremin.start()}),i.addEventListener("drag",function(e){var t=u.position.clone(),n=l.position.clone(),o=t.sub(n).addScalar(12).divideScalar(24);c.theremin.drag(o.z,o.x),TweenLite.to(c,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){c.setSpeed(c.speed)}})}),i.addEventListener("dragend",function(e){r.enabled=!0,TweenLite.to(c,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){c.setSpeed(c.speed)},onComplete:function(){c.theremin.stop(),c.stop()}})}),function e(){requestAnimationFrame(e);l.rotation.x+=.03*c.speed;l.rotation.y+=.06*c.speed;a.render(o,n)}(),window.addEventListener("resize",function(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)},!1)}();
//# sourceMappingURL=app.min.js.map
