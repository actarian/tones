!function(){"use strict";if(Detector.webgl){new Tone.Volume(-100);var t,n,o,a,r,i,s,d,p,l,u,c,h=function(){var t=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),e=new Tone.Compressor({threshold:-30,ratio:6,attack:.3,release:.1}).toMaster(),n=new Tone.Distortion({distortion:.4,wet:.4}),o=new Tone.Player({url:"audio/505/hh.[mp3|ogg]",volume:-10,retrigger:!0,fadeOut:.05}).chain(n,e);o.loop=new Tone.Loop({callback:function(e){o.start(e).stop(e+.05)},interval:"16n",probability:.8}).start("1m");var a=new Tone.Player({url:"audio/505/snare.[mp3|ogg]",retrigger:!0,fadeOut:.1}).chain(n,e);a.part=new Tone.Sequence(function(e,t){a.volume.value=Tone.gainToDb(t),a.start(e).stop(e+.1)},[null,1,null,[1,.3]]).start(0);var r=new Tone.MembraneSynth({pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.2,sustain:0}}).connect(e);r.part=new Tone.Sequence(function(e,t){Math.random()<t&&r.triggerAttack("C1",e)},[1,[1,[null,.3]],1,[1,[null,.5]],1,1,1,[1,[null,.8]]],"2n").start(0);var i=new Tone.FMSynth({harmonicity:1,modulationIndex:3.5,carrier:{oscillator:{type:"custom",partials:[0,1,0,2]},envelope:{attack:.08,decay:.3,sustain:0}},modulator:{oscillator:{type:"square"},envelope:{attack:.1,decay:.2,sustain:.3,release:.01}}}).toMaster();i.part=new Tone.Part(function(e,t){Math.random()<t.prob&&i.triggerAttackRelease(t.note,t.dur,e)},[{time:"0:0",note:"C2",dur:"4n.",prob:1},{time:"0:2",note:"C2",dur:"8n",prob:.6},{time:"0:2.6666",note:"C2",dur:"8n",prob:.4},{time:"0:3.33333",note:"C2",dur:"8n",prob:.9},{time:"1:0",note:"C2",dur:"4n.",prob:1},{time:"1:2",note:"C2",dur:"8n",prob:.6},{time:"1:2.6666",note:"C2",dur:"8n",prob:.4},{time:"1:3.33333",note:"E2",dur:"8n",prob:.9},{time:"2:0",note:"F2",dur:"4n.",prob:1},{time:"2:2",note:"F2",dur:"8n",prob:.6},{time:"2:2.6666",note:"F2",dur:"8n",prob:.4},{time:"2:3.33333",note:"F2",dur:"8n",prob:.9},{time:"3:0",note:"F2",dur:"4n.",prob:1},{time:"3:2",note:"F2",dur:"8n",prob:.6},{time:"3:2.6666",note:"F2",dur:"8n",prob:.4},{time:"3:3.33333",note:"B1",dur:"8n",prob:.9}]).start(0),i.part.loop=!0,i.part.loopEnd="4m";var s=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:5,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();return s.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],s.note=s.notes[0],Tone.Transport.bpm.value=1,{effects:{filter:t,compressor:e,distortion:n},instruments:{hats:o,snare:a,kick:r,bass:i,synth:s},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.stop()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),n=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,n));var o=Math.max(0,Math.min(s.notes.length-1,Math.round(n*s.notes.length-1))),a=s.notes[s.notes.length-1-o];s.note!==a&&(s.note=a,s.setNote(a)),s.vibratoAmount.value=10*t},start:function(){s.triggerAttack(s.note)},stop:function(){s.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),Tone.Transport.bpm.value=1+Math.round(124*e),t.set("detune",1e4*e-1e4)}}}(),m=[],w=[];c=function(){e(),f()},function(e){var t={method:"GET",responseType:"text"};if(e&&e.url&&e.onload){for(var n in e)t[n]=e[n];var o=new XMLHttpRequest;o.open(t.method,t.url,!0),o.responseType=t.responseType,o.onload=function(){200===this.status&&t.onload(this.response)},t.onerror&&(o.onerror=t.onerror),t.onprogress&&(o.onerror=t.onprogress),o.send()}}({url:"glsl/pcss.glsl",onload:function(e){var t=THREE.ShaderChunk.shadowmap_pars_fragment;t=(t=t.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP"+e)).replace("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),THREE.ShaderChunk.shadowmap_pars_fragment=t,"function"==typeof c&&c()}}),window.addEventListener("resize",function(){t.resize(),o.setSize(window.innerWidth,window.innerHeight)},!1)}else Detector.addGetWebGLMessage();function e(){var e;(n=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(e=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,300,0),e.lookAt(0,0,0),e.resize=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()},window.camera=e,n.add(e),t=e,(i=new THREE.PointLight(16777215,2,30)).position.set(20,60,20),i.castShadow=!0,i.shadow.mapSize.width=2048,i.shadow.mapSize.height=2048,i.shadow.camera.near=.1,i.shadow.camera.far=500,n.add(i),s=new THREE.PlaneGeometry(100,100,25,25),d=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(p=new THREE.Mesh(s,d)).rotation.x=-Math.PI/2,p.position.set(0,0,0),p.receiveShadow=!0,n.add(p),s=new THREE.BoxGeometry(10,10,10),d=new THREE.MeshStandardMaterial({color:9670284,roughness:.6,metalness:.1,opacity:.5,transparent:!0}),(l=new THREE.Mesh(s,d)).position.set(0,5,0),l.castShadow=!0,l.receiveShadow=!1,n.add(l),m.push(l),s=new THREE.BoxGeometry(3,3,3),d=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(u=new THREE.Mesh(s,d)).position.set(0,1.5,-20),u.castShadow=!0,u.receiveShadow=!1,n.add(u),w.push(u),(o=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),o.shadowMap.enabled=!0,o.gammaInput=!0,o.gammaOutput=!0,document.querySelector(".section-scene").appendChild(o.domElement),(r=new THREE.DragControls(w,t,o.domElement)).addEventListener("dragstart",function(e){a&&(a.enabled=!1),h.start(),h.theremin.start()}),r.addEventListener("drag",function(e){var t=u.position.clone(),n=l.position.clone(),o=t.sub(n);h.theremin.drag(o),TweenLite.to(h,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){h.setSpeed(h.speed)}})}),r.addEventListener("dragend",function(e){a&&(a.enabled=!0),TweenLite.to(h,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){h.setSpeed(h.speed)},onComplete:function(){h.theremin.stop(),h.stop()}})})}function f(){requestAnimationFrame(f),l.rotation.y+=.06*h.speed,i.position.x+=(-1*u.position.x-i.position.x)/20,i.position.z+=(-1*u.position.z-i.position.z)/20,o.render(n,t)}}();
//# sourceMappingURL=app.min.js.map
