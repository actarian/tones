!function(){"use strict";if(Detector.webgl){var n,o,i,t,a,r,s,d,l,p,h,c,w,E,u,m,M,T,f,g,v={DIFFUSE:0,BUMP:1,LIGHT:2,ALPHA:3,METAL:4},S=window.performance||Date,R=[],H=(new Tone.Volume(-100),function(){var i=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),t=new Tone.Player({url:"audio/The-Blinding-Shiver-128.[mp3|ogg]",loop:!0,playbackRate:.1}).toMaster().sync().start("0");Tone.Transport.timeSignature=4,Tone.Transport.bpm.value=98,Tone.Transport.loop=!0,Tone.Transport.loopStart="0",Tone.Transport.loopEnd="98:5";var r=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:1,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();r.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],r.note=r.notes[0];var s={effects:{filter:i},instruments:{player:t,synth:r},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.pause()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),a=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),a=Math.max(0,Math.min(1,a));var n=Math.max(0,Math.min(r.notes.length-1,Math.round(a*r.notes.length-1))),o=r.notes[r.notes.length-1-n];r.note!==o&&(r.note=o,r.setNote(o)),r.vibratoAmount.value=10*t,1===s.speed&&i.set("detune",2e4*t-1e4)},start:function(){r.triggerAttack(r.note)},stop:function(){r.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),t.set("playbackRate",.1+.99*e),i.set("detune",1e4*e-1e4)}};return s}()),y=[],b=[];e(),P(),window.addEventListener("resize",function(){n.resize(),i.setSize(window.innerWidth,window.innerHeight)},!1)}else Detector.addGetWebGLMessage();function e(){var e;(o=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(e=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,300,0),e.lookAt(0,0,0),e.resize=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()},window.camera=e,o.add(e),n=e,(r=new THREE.SpotLight(16711422,1,1e3,1,1,.1)).position.set(35,50,-35),r.castShadow=!0,r.shadow.mapSize.width=2048,r.shadow.mapSize.height=2048,r.shadow.camera.near=.1,r.shadow.camera.far=500,r.shadow.radius=1.0001,o.add(r),s=new THREE.PlaneGeometry(500,500,25,25),d=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(l=new THREE.Mesh(s,d)).rotation.set(-Math.PI/2,0,0),l.position.set(0,0,-1),l.receiveShadow=!0,o.add(l),(m=(new THREE.TextureLoader).load("img/envmap-sm.jpg")).mapping=THREE.EquirectangularReflectionMapping,m.magFilter=THREE.LinearFilter,m.minFilter=THREE.LinearMipMapLinearFilter,s=new THREE.SphereGeometry(1,64,64),d=new THREE.MeshStandardMaterial({color:9670284,roughness:.6,metalness:.1,opacity:1,transparent:!1}),d=new THREE.MeshStandardMaterial({color:6710886,roughness:.2,metalness:.95,envMap:m,envMapIntensity:1}),(p=new THREE.Mesh(s,d)).position.set(0,1,0),p.receiveShadow=!1,p.castShadow=!0,o.add(p),y.push(p),s=new THREE.BoxGeometry(3,3,3),d=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(h=new THREE.Mesh(s,d)).position.set(-35,1.5,35),h.receiveShadow=!1,h.castShadow=!0,s=new THREE.RingGeometry(3,3.2,32,1),d=new THREE.MeshStandardMaterial({color:4143928,roughness:.9,metalness:.1,opacity:0,transparent:!0}),(c=new THREE.Mesh(s,d)).rotation.set(-Math.PI/2,0,0),c.receiveShadow=!1,c.castShadow=!1,h.add(c),o.add(h),b.push(h),M=L(v.BUMP),f=L(v.LIGHT,512),T=L(v.DIFFUSE,512),g=L(v.LIGHT,512),s=new THREE.RingGeometry(12.1,45,64,4),d=new THREE.MeshStandardMaterial({color:3091755,map:T,bumpMap:M,bumpScale:.02,envMap:m,roughness:1,roughnessMap:f,metalness:1,metalnessMap:g}),(E=new THREE.Mesh(s,d)).position.set(0,.1,0),E.rotation.set(-Math.PI/2,0,0),E.receiveShadow=!0,E.castShadow=!0,T=(new THREE.TextureLoader).load("img/disc.jpg"),s=new THREE.RingGeometry(1.3,12,64,4),d=new THREE.MeshStandardMaterial({color:16777215,map:T,roughness:.6,metalness:.4}),(u=new THREE.Mesh(s,d)).position.set(0,0,0),u.receiveShadow=!0,u.castShadow=!0,E.add(u),o.add(E),T=(new THREE.TextureLoader).load("img/cover.jpg"),s=new THREE.PlaneGeometry(90,90,32,32),d=new THREE.MeshStandardMaterial({color:15723496,map:T,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(w=new THREE.Mesh(s,d)).rotation.set(-Math.PI/2,0,0),w.position.set(-25,2,0),w.receiveShadow=!0,w.castShadow=!0,o.add(w),(i=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.shadowMap.enabled=!0,i.gammaInput=!0,i.gammaOutput=!0,i.shadowMap.type=THREE.PCFSoftShadowMap,document.querySelector(".section-scene").appendChild(i.domElement),(a=new THREE.DragControls(b,n,i.domElement)).addEventListener("dragstart",function(e){t&&(t.enabled=!1),H.start(),H.theremin.start()}),a.addEventListener("drag",function(e){var t=h.position.clone(),a=p.position.clone(),n=t.sub(a);H.theremin.drag(n),0===H.speed&&TweenLite.to(H,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){H.setSpeed(H.speed)}})}),a.addEventListener("dragend",function(e){t&&(t.enabled=!0),0!==H.speed&&TweenLite.to(H,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){H.setSpeed(H.speed)},onComplete:function(){H.theremin.stop(),H.stop()}})})}function L(e,t){var a=t=t||2048,n=t,o=document.createElement("canvas");o.width=a,o.height=n;var i=o.getContext("2d"),r=a/2,s=n/2,d=t/2*.3,l=t/2*.99;function p(e,t,a,n){i.beginPath(),i.arc(r,s,e,0,2*Math.PI,!1),t&&(i.fillStyle=t,i.fill()),a&&(i.lineWidth=n,i.strokeStyle=a,i.stroke()),i.closePath()}if(e===v.DIFFUSE&&(i.fillStyle="#2f2d2b",i.rect(0,0,a,n),i.fill(),p(d,"#332d2a")),e===v.METAL&&(i.fillStyle="#000000",i.rect(0,0,a,n),i.fill(),p(d,"#f0f0f0")),e===v.LIGHT){i.fillStyle="#000000",i.rect(0,0,a,n),i.fill();for(var h=d;h<l;h+=10+30*Math.random())p(h+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",10+40*Math.random())}if(e===v.BUMP){i.fillStyle="#000000",i.rect(0,0,a,n),i.fill();for(h=d;h<l;h+=2)p(h+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",.6)}return new THREE.CanvasTexture(o)}function P(e){requestAnimationFrame(P);var t=.0575959*60/(function(){for(var e=S.now();0<R.length&&R[0]<=e-1e3;)R.shift();return R.push(e),R.length}()||60);p.rotation.y+=t*H.speed,E.rotation.z+=t*H.speed,h.rotation.y+=t*H.speed;var a=Math.abs(Math.sin(.001*e));c.material.opacity=a,c.scale.set(1+.5*a,1+.5*a,1+.5*a),w.position.x=-25-90*H.speed,r.position.x+=(-1*h.position.x-r.position.x)/20,r.position.z+=(-1*h.position.z-r.position.z)/20,i.render(o,n)}}();
//# sourceMappingURL=app.min.js.map
