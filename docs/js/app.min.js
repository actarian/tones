!function(){"use strict";var e=function(){new Tone.Volume(-100);function e(){}return e.getMp3=function(){var r=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),t=new Tone.Player({url:"audio/The-Blinding-Shiver-128.[mp3|ogg]",loop:!0,playbackRate:.1}).toMaster().sync().start("0");Tone.Transport.timeSignature=4,Tone.Transport.bpm.value=98,Tone.Transport.loop=!0,Tone.Transport.loopStart="0",Tone.Transport.loopEnd="98:5";var i=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:1,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();i.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],i.note=i.notes[0];var s={effects:{filter:r},instruments:{player:t,synth:i},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.pause()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),a=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),a=Math.max(0,Math.min(1,a));var n=Math.max(0,Math.min(i.notes.length-1,Math.round(a*i.notes.length-1))),o=i.notes[i.notes.length-1-n];i.note!==o&&(i.note=o,i.setNote(o)),i.vibratoAmount.value=10*t,1===s.speed&&r.set("detune",2e4*t-1e4)},start:function(){i.triggerAttack(i.note)},stop:function(){i.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),t.set("playbackRate",.1+.99*e),r.set("detune",1e4*e-1e4)}};return s},e.getSong=function(){var t=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),e=new Tone.Compressor({threshold:-30,ratio:6,attack:.3,release:.1}).toMaster(),a=new Tone.Distortion({distortion:.4,wet:.4}),n=new Tone.Player({url:"audio/505/hh.[mp3|ogg]",volume:-10,retrigger:!0,fadeOut:.05}).chain(a,e);n.loop=new Tone.Loop({callback:function(e){n.start(e).stop(e+.05)},interval:"16n",probability:.8}).start("1m");var o=new Tone.Player({url:"audio/505/snare.[mp3|ogg]",retrigger:!0,fadeOut:.1}).chain(a,e);o.part=new Tone.Sequence(function(e,t){o.volume.value=Tone.gainToDb(t),o.start(e).stop(e+.1)},[null,1,null,[1,.3]]).start(0);var r=new Tone.MembraneSynth({pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.2,sustain:0}}).connect(e);r.part=new Tone.Sequence(function(e,t){Math.random()<t&&r.triggerAttack("C1",e)},[1,[1,[null,.3]],1,[1,[null,.5]],1,1,1,[1,[null,.8]]],"2n").start(0);var i=new Tone.FMSynth({harmonicity:1,modulationIndex:3.5,carrier:{oscillator:{type:"custom",partials:[0,1,0,2]},envelope:{attack:.08,decay:.3,sustain:0}},modulator:{oscillator:{type:"square"},envelope:{attack:.1,decay:.2,sustain:.3,release:.01}}}).toMaster();i.part=new Tone.Part(function(e,t){Math.random()<t.prob&&i.triggerAttackRelease(t.note,t.dur,e)},[{time:"0:0",note:"C2",dur:"4n.",prob:1},{time:"0:2",note:"C2",dur:"8n",prob:.6},{time:"0:2.6666",note:"C2",dur:"8n",prob:.4},{time:"0:3.33333",note:"C2",dur:"8n",prob:.9},{time:"1:0",note:"C2",dur:"4n.",prob:1},{time:"1:2",note:"C2",dur:"8n",prob:.6},{time:"1:2.6666",note:"C2",dur:"8n",prob:.4},{time:"1:3.33333",note:"E2",dur:"8n",prob:.9},{time:"2:0",note:"F2",dur:"4n.",prob:1},{time:"2:2",note:"F2",dur:"8n",prob:.6},{time:"2:2.6666",note:"F2",dur:"8n",prob:.4},{time:"2:3.33333",note:"F2",dur:"8n",prob:.9},{time:"3:0",note:"F2",dur:"4n.",prob:1},{time:"3:2",note:"F2",dur:"8n",prob:.6},{time:"3:2.6666",note:"F2",dur:"8n",prob:.4},{time:"3:3.33333",note:"B1",dur:"8n",prob:.9}]).start(0),i.part.loop=!0,i.part.loopEnd="4m";var s=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:5,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();return s.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],s.note=s.notes[0],Tone.Transport.bpm.value=1,{effects:{filter:t,compressor:e,distortion:a},instruments:{hats:n,snare:o,kick:r,bass:i,synth:s},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.stop()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),a=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),a=Math.max(0,Math.min(1,a));var n=Math.max(0,Math.min(s.notes.length-1,Math.round(a*s.notes.length-1))),o=s.notes[s.notes.length-1-n];s.note!==o&&(s.note=o,s.setNote(o)),s.vibratoAmount.value=10*t},start:function(){s.triggerAttack(s.note)},stop:function(){s.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),Tone.Transport.bpm.value=1+Math.round(124*e),t.set("detune",1e4*e-1e4)}}},e.getSynth=function(e){var t=new Tone.Synth({oscillator:{type:"amtriangle",harmonicity:.5,modulationType:"sine"},envelope:{attackCurve:"exponential",attack:.05,decay:.2,sustain:.2,release:1.5},portamento:.05});return t.chain(e,Tone.Master),t},e}();window.Song=e}(),function(){"use strict";if(Detector.webgl){var e=document.querySelector(".section-scene"),o=Song.getMp3(),E=!1,t=!0,a=1024,f=0,T={DIFFUSE:0,BUMP:1,LIGHT:2,ALPHA:3},c=Math.PI/180,n=new Stats;n.showPanel(0),n.dom.setAttribute("class","stats"),E&&e.appendChild(n.dom);var r,i,s,l,u,p,h,m,w,g,M,v,y,b,S,R,H,x,C,F,P,L,d=window.performance||Date,k=[],G=[],A=[];C=B(T.BUMP),P=B(T.LIGHT,512),F=B(T.DIFFUSE,512),L=B(T.LIGHT,512),D(),I(),window.addEventListener("resize",z,!1)}else Detector.addGetWebGLMessage();function D(){var d;(s=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(d=new THREE.PerspectiveCamera(20,e.offsetWidth/e.offsetHeight,.01,1e3)).position.set(0,300,0),d.lookAt(0,0,0),d.resize=function(){d.aspect=e.offsetWidth/e.offsetHeight,d.updateProjectionMatrix(),d.fit(g,1.2)},d.fit=function(e,t,a){t=t||1.2,a=a||new THREE.Vector3(0,0,-1);var n=new THREE.Box3,o=new THREE.Vector3,r=new THREE.Vector3;n.setFromObject(e),n.getCenter(r),n.applyMatrix4(d.matrixWorldInverse),n.getSize(o);var i=o.x/o.y,s=d.aspect>i?o.y:o.x;d.aspect<i&&(s/=d.aspect);var l=(s*=t)/2/Math.sin(d.fov/2*c);d.position.normalize().multiplyScalar(l),d.up=a;var p=d.position.distanceTo(r);u?(u.target=r,u.maxDistance=p+s,u.update()):d.far=p+s,d.updateProjectionMatrix()},window.camera=d,s.add(d),i=d,(h=new THREE.SpotLight(16711422,1,1e3,1,1,.1)).position.set(35,50,-35),h.castShadow=!0,h.shadow.mapSize.width=a,h.shadow.mapSize.height=a,h.shadow.camera.near=.1,h.shadow.camera.far=500,h.shadow.radius=1.0001,s.add(h),g=new THREE.Group,m=new THREE.PlaneGeometry(500,500,25,25),w=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(M=new THREE.Mesh(m,w)).rotation.set(-Math.PI/2,0,0),M.position.set(0,0,-1),M.receiveShadow=!0,s.add(M),(x=(new THREE.TextureLoader).load("img/envmap-sm.jpg")).mapping=THREE.EquirectangularReflectionMapping,x.magFilter=THREE.LinearFilter,x.minFilter=THREE.LinearMipMapLinearFilter,m=new THREE.SphereGeometry(1,64,64),w=new THREE.MeshStandardMaterial({color:6710886,roughness:.2,metalness:.95,envMap:x,envMapIntensity:1}),(v=new THREE.Mesh(m,w)).position.set(0,1,0),v.receiveShadow=!1,v.castShadow=!0,g.add(v),G.push(v),m=new THREE.BoxGeometry(3,3,3),w=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(y=new THREE.Mesh(m,w)).position.set(55,4,0),y.receiveShadow=!1,y.castShadow=!0,t&&(m=new THREE.RingGeometry(3,3.3,32,1),w=new THREE.MeshStandardMaterial({color:4143928,roughness:.9,metalness:.1,opacity:0,transparent:!0}),(b=new THREE.Mesh(m,w)).rotation.set(-Math.PI/2,0,0),b.receiveShadow=!1,b.castShadow=!1,y.add(b)),g.add(y),A.push(y),m=new THREE.RingGeometry(12.1,45,64,4),w=new THREE.MeshStandardMaterial({color:3091755,map:F,bumpMap:C,bumpScale:.02,roughness:1,roughnessMap:P,metalness:1,metalnessMap:L}),(R=new THREE.Mesh(m,w)).position.set(0,.1,0),R.rotation.set(-Math.PI/2,0,0),R.receiveShadow=!0,R.castShadow=!0,F=(new THREE.TextureLoader).load("img/disc.jpg"),m=new THREE.RingGeometry(1.3,12,64,4),w=new THREE.MeshStandardMaterial({color:16777215,map:F,roughness:.6,metalness:.4}),(H=new THREE.Mesh(m,w)).position.set(0,0,0),H.receiveShadow=!0,H.castShadow=!0,R.add(H),g.add(R),F=(new THREE.TextureLoader).load("img/cover.jpg"),m=new THREE.PlaneGeometry(90,90,32,32),w=new THREE.MeshStandardMaterial({color:15723496,map:F,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(S=new THREE.Mesh(m,w)).rotation.set(-Math.PI/2,0,0),S.position.set(-25,4,0),S.receiveShadow=!0,S.castShadow=!0,g.add(S),s.add(g),(l=new THREE.WebGLRenderer({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0})).setPixelRatio(window.devicePixelRatio),l.setSize(e.offsetWidth,e.offsetHeight),l.shadowMap.enabled=!0,l.gammaInput=!0,l.gammaOutput=!0,l.shadowMap.type=THREE.PCFSoftShadowMap,(p=new THREE.DragControls(A,i,l.domElement)).addEventListener("dragstart",function(e){r=!0,u&&(u.enabled=!1),o.start(),o.theremin.start()}),p.addEventListener("drag",function(e){var t=y.position.clone(),a=v.position.clone(),n=t.sub(a);o.theremin.drag(n),0===o.speed&&TweenLite.to(o,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){o.setSpeed(o.speed)}})}),p.addEventListener("dragend",function(e){r=!1,u&&(u.enabled=!0),0!==o.speed&&(TweenLite.to(o,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){o.setSpeed(o.speed)},onComplete:function(){o.theremin.stop(),o.stop()}}),TweenLite.to(y.rotation,1,{y:Math.round(y.rotation.y/Math.PI*2)*Math.PI/2,ease:Power2.easeOut}),TweenLite.to(y.position,1,{x:55,z:0,ease:Elastic.easeOut}),TweenLite.to(h.position,1,{x:35,z:-35,ease:Elastic.easeOut}))}),setTimeout(function(){e.appendChild(l.domElement),z()},100)}function I(e){n.begin();var t=.0575959*60/(function(){var e=d.now();for(;0<k.length&&k[0]<=e-1e3;)k.shift();return k.push(e),k.length}()||60);if(b){var a=Math.abs(Math.sin(.001*e))*(1-o.speed);b.material.opacity=a,b.scale.set(1+.5*a,1+.5*a,1+.5*a)}v.rotation.y+=t*o.speed,R.rotation.z+=t*o.speed,y.rotation.y+=t*o.speed,S.position.x=-25-90*o.speed,r&&(h.position.x+=(-1*y.position.x-h.position.x)/20,h.position.z+=(-1*y.position.z-h.position.z)/20),l.render(s,i),n.end(),requestAnimationFrame(I)}function z(){i.resize(),l.setSize(e.offsetWidth,e.offsetHeight),l.clearDepth()}function B(e,t){var a=t=t||2048,n=t,o=document.createElement("canvas");o.width=a,o.height=n;var r,i=o.getContext("2d"),s=a/2,l=n/2,p=t/2*.3,d=t/2*.98;function c(e,t,a,n){i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),t&&(i.fillStyle=t,i.fill()),a&&(i.lineWidth=n,i.strokeStyle=a,i.stroke()),i.closePath()}if(e===T.DIFFUSE&&(i.fillStyle="#2f2d2b",i.rect(0,0,a,n),i.fill(),c(p,"#332d2a")),e===T.LIGHT)for(i.fillStyle="#000000",i.rect(0,0,a,n),i.fill(),r=p;r<d;r+=10+30*Math.random()){var u=r+.2*Math.random(),h=(20+30*Math.random())/2;h=2*Math.min(h,d-u-1),c(u,null,"rgba(255, 255, 255, "+.5*Math.random()+")",h)}if(e===T.BUMP)for(i.fillStyle="#000000",i.rect(0,0,a,n),i.fill(),r=p;r<d;r+=2)c(r+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",.6);var m=new THREE.CanvasTexture(o,THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearMipMapLinearFilter,THREE.RGBFormat,THREE.UnsignedByteType,2);return E&&(o.setAttribute("style","top:"+256*f+"px;"),document.body.appendChild(o)),f++,m}}();
//# sourceMappingURL=app.min.js.map
