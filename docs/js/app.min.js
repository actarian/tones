!function(){"use strict";if(Detector.webgl){var t,a,n,o,i,r,s,d,l,p,h,c,w,E,u,m,T,M,f,g={DIFFUSE:0,BUMP:1,LIGHT:2,ALPHA:3,METAL:4},v=window.performance||Date,S=[],R=(new Tone.Volume(-100),function(){var i=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),t=new Tone.Player({url:"audio/The-Blinding-Shiver-128.[mp3|ogg]",loop:!0,playbackRate:.1}).toMaster().sync().start("0");Tone.Transport.timeSignature=4,Tone.Transport.bpm.value=98,Tone.Transport.loop=!0,Tone.Transport.loopStart="0",Tone.Transport.loopEnd="98:5";var r=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:1,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();r.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],r.note=r.notes[0];var s={effects:{filter:i},instruments:{player:t,synth:r},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.pause()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),a=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),a=Math.max(0,Math.min(1,a));var n=Math.max(0,Math.min(r.notes.length-1,Math.round(a*r.notes.length-1))),o=r.notes[r.notes.length-1-n];r.note!==o&&(r.note=o,r.setNote(o)),r.vibratoAmount.value=10*t,1===s.speed&&i.set("detune",2e4*t-1e4)},start:function(){r.triggerAttack(r.note)},stop:function(){r.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),t.set("playbackRate",.1+.99*e),i.set("detune",1e4*e-1e4)}};return s}()),H=[],y=[];e(),L(),window.addEventListener("resize",function(){t.resize(),n.setSize(window.innerWidth,window.innerHeight)},!1)}else Detector.addGetWebGLMessage();function e(){var e;(a=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(e=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,300,0),e.lookAt(0,0,0),e.resize=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()},window.camera=e,a.add(e),t=e,(r=new THREE.SpotLight(16711422,1,1e3,1,1,.1)).position.set(35,50,-35),r.castShadow=!0,r.shadow.mapSize.width=2048,r.shadow.mapSize.height=2048,r.shadow.camera.near=.1,r.shadow.camera.far=500,r.shadow.radius=1.0001,a.add(r),s=new THREE.PlaneGeometry(500,500,25,25),d=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(l=new THREE.Mesh(s,d)).rotation.set(-Math.PI/2,0,0),l.position.set(0,0,-1),l.receiveShadow=!0,a.add(l),(u=(new THREE.TextureLoader).load("img/envmap-sm.jpg")).mapping=THREE.EquirectangularReflectionMapping,u.magFilter=THREE.LinearFilter,u.minFilter=THREE.LinearMipMapLinearFilter,s=new THREE.SphereGeometry(1,64,64),d=new THREE.MeshStandardMaterial({color:9670284,roughness:.6,metalness:.1,opacity:1,transparent:!1}),d=new THREE.MeshStandardMaterial({color:6710886,roughness:.2,metalness:.95,envMap:u,envMapIntensity:1}),(p=new THREE.Mesh(s,d)).position.set(0,1,0),p.receiveShadow=!1,p.castShadow=!0,a.add(p),H.push(p),s=new THREE.BoxGeometry(3,3,3),d=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(h=new THREE.Mesh(s,d)).position.set(-35,1.5,35),h.receiveShadow=!1,h.castShadow=!0,a.add(h),y.push(h),m=b(g.BUMP),M=b(g.LIGHT,512),T=b(g.DIFFUSE,512),f=b(g.LIGHT,512),s=new THREE.RingGeometry(12.1,45,64,4),d=new THREE.MeshStandardMaterial({color:3091755,map:T,bumpMap:m,bumpScale:.02,envMap:u,roughness:1,roughnessMap:M,metalness:1,metalnessMap:f}),(w=new THREE.Mesh(s,d)).position.set(0,.1,0),w.rotation.set(-Math.PI/2,0,0),w.receiveShadow=!0,w.castShadow=!0,T=(new THREE.TextureLoader).load("img/disc.jpg"),s=new THREE.RingGeometry(1.3,12,64,4),d=new THREE.MeshStandardMaterial({color:16777215,map:T,roughness:.6,metalness:.4}),(E=new THREE.Mesh(s,d)).position.set(0,0,0),E.receiveShadow=!0,E.castShadow=!0,w.add(E),a.add(w),s=new THREE.PlaneGeometry(90,90,32,32),d=new THREE.MeshStandardMaterial({color:4143928,map:T,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(c=new THREE.Mesh(s,d)).rotation.set(-Math.PI/2,0,0),c.position.set(-25,2,0),c.receiveShadow=!0,c.castShadow=!0,a.add(c),(n=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),n.shadowMap.enabled=!0,n.gammaInput=!0,n.gammaOutput=!0,n.shadowMap.type=THREE.PCFSoftShadowMap,document.querySelector(".section-scene").appendChild(n.domElement),(i=new THREE.DragControls(y,t,n.domElement)).addEventListener("dragstart",function(e){o&&(o.enabled=!1),R.start(),R.theremin.start()}),i.addEventListener("drag",function(e){var t=h.position.clone(),a=p.position.clone(),n=t.sub(a);R.theremin.drag(n),0===R.speed&&TweenLite.to(R,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){R.setSpeed(R.speed)}})}),i.addEventListener("dragend",function(e){o&&(o.enabled=!0),0!==R.speed&&TweenLite.to(R,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){R.setSpeed(R.speed)},onComplete:function(){R.theremin.stop(),R.stop()}})})}function b(e,t){var a=t=t||2048,n=t,o=document.createElement("canvas");o.width=a,o.height=n;var i=o.getContext("2d"),r=a/2,s=n/2,d=t/2*.3,l=t/2*.99;function p(e,t,a,n){i.beginPath(),i.arc(r,s,e,0,2*Math.PI,!1),t&&(i.fillStyle=t,i.fill()),a&&(i.lineWidth=n,i.strokeStyle=a,i.stroke()),i.closePath()}if(e===g.DIFFUSE&&(i.fillStyle="#2f2d2b",i.rect(0,0,a,n),i.fill(),p(d,"#332d2a")),e===g.METAL&&(i.fillStyle="#000000",i.rect(0,0,a,n),i.fill(),p(d,"#f0f0f0")),e===g.LIGHT){i.fillStyle="#000000",i.rect(0,0,a,n),i.fill();for(var h=d;h<l;h+=10+30*Math.random())p(h+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",10+40*Math.random())}if(e===g.BUMP){i.fillStyle="#000000",i.rect(0,0,a,n),i.fill();for(h=d;h<l;h+=2)p(h+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",.6)}return new THREE.CanvasTexture(o)}function L(){requestAnimationFrame(L);var e=.0575959*60/(function(){for(var e=v.now();0<S.length&&S[0]<=e-1e3;)S.shift();return S.push(e),S.length}()||60);p.rotation.y+=e*R.speed,w.rotation.z+=e*R.speed,h.rotation.y+=e*R.speed,c.position.x=-25-90*R.speed,r.position.x+=(-1*h.position.x-r.position.x)/20,r.position.z+=(-1*h.position.z-r.position.z)/20,n.render(a,t)}}();
//# sourceMappingURL=app.min.js.map
