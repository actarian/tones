!function(){"use strict";if(Detector.webgl){var s,d,l,p,c,u,h,m,w,E,M,T,f={DIFFUSE:0,BUMP:1,LIGHT:2,ALPHA:3,METAL:4},g=(new Tone.Volume(-100),function(){var t=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),e=new Tone.Compressor({threshold:-30,ratio:6,attack:.3,release:.1}).toMaster(),n=new Tone.Distortion({distortion:.4,wet:.4}),a=new Tone.Player({url:"audio/505/hh.[mp3|ogg]",volume:-10,retrigger:!0,fadeOut:.05}).chain(n,e);a.loop=new Tone.Loop({callback:function(e){a.start(e).stop(e+.05)},interval:"16n",probability:.8}).start("1m");var o=new Tone.Player({url:"audio/505/snare.[mp3|ogg]",retrigger:!0,fadeOut:.1}).chain(n,e);o.part=new Tone.Sequence(function(e,t){o.volume.value=Tone.gainToDb(t),o.start(e).stop(e+.1)},[null,1,null,[1,.3]]).start(0);var r=new Tone.MembraneSynth({pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.2,sustain:0}}).connect(e);r.part=new Tone.Sequence(function(e,t){Math.random()<t&&r.triggerAttack("C1",e)},[1,[1,[null,.3]],1,[1,[null,.5]],1,1,1,[1,[null,.8]]],"2n").start(0);var i=new Tone.FMSynth({harmonicity:1,modulationIndex:3.5,carrier:{oscillator:{type:"custom",partials:[0,1,0,2]},envelope:{attack:.08,decay:.3,sustain:0}},modulator:{oscillator:{type:"square"},envelope:{attack:.1,decay:.2,sustain:.3,release:.01}}}).toMaster();i.part=new Tone.Part(function(e,t){Math.random()<t.prob&&i.triggerAttackRelease(t.note,t.dur,e)},[{time:"0:0",note:"C2",dur:"4n.",prob:1},{time:"0:2",note:"C2",dur:"8n",prob:.6},{time:"0:2.6666",note:"C2",dur:"8n",prob:.4},{time:"0:3.33333",note:"C2",dur:"8n",prob:.9},{time:"1:0",note:"C2",dur:"4n.",prob:1},{time:"1:2",note:"C2",dur:"8n",prob:.6},{time:"1:2.6666",note:"C2",dur:"8n",prob:.4},{time:"1:3.33333",note:"E2",dur:"8n",prob:.9},{time:"2:0",note:"F2",dur:"4n.",prob:1},{time:"2:2",note:"F2",dur:"8n",prob:.6},{time:"2:2.6666",note:"F2",dur:"8n",prob:.4},{time:"2:3.33333",note:"F2",dur:"8n",prob:.9},{time:"3:0",note:"F2",dur:"4n.",prob:1},{time:"3:2",note:"F2",dur:"8n",prob:.6},{time:"3:2.6666",note:"F2",dur:"8n",prob:.4},{time:"3:3.33333",note:"B1",dur:"8n",prob:.9}]).start(0),i.part.loop=!0,i.part.loopEnd="4m";var s=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:5,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();return s.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],s.note=s.notes[0],Tone.Transport.bpm.value=1,{effects:{filter:t,compressor:e,distortion:n},instruments:{hats:a,snare:o,kick:r,bass:i,synth:s},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.stop()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),n=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,n));var a=Math.max(0,Math.min(s.notes.length-1,Math.round(n*s.notes.length-1))),o=s.notes[s.notes.length-1-a];s.note!==o&&(s.note=o,s.setNote(o)),s.vibratoAmount.value=10*t},start:function(){s.triggerAttack(s.note)},stop:function(){s.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),Tone.Transport.bpm.value=1+Math.round(124*e),t.set("detune",1e4*e-1e4)}}}()),v=[],b=[];e(),t(),window.addEventListener("resize",function(){s.resize(),l.setSize(window.innerWidth,window.innerHeight)},!1)}else Detector.addGetWebGLMessage();function e(){var e;(d=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(e=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,300,0),e.lookAt(0,0,0),e.resize=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()},window.camera=e,d.add(e),s=e,(u=new THREE.SpotLight(16711422,1,1e3,1,1,.1)).position.set(50,50,50),u.castShadow=!0,u.shadow.mapSize.width=2048,u.shadow.mapSize.height=2048,u.shadow.camera.near=.1,u.shadow.camera.far=500,u.shadow.radius=1.0001,d.add(u),h=new THREE.PlaneGeometry(500,500,25,25),m=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(w=new THREE.Mesh(h,m)).rotation.x=-Math.PI/2,w.position.set(0,0,0),w.receiveShadow=!0,d.add(w);var t=(new THREE.TextureLoader).load("img/envmap.jpg");t.mapping=THREE.EquirectangularReflectionMapping,t.magFilter=THREE.LinearFilter,t.minFilter=THREE.LinearMipMapLinearFilter,h=new THREE.SphereGeometry(2,64,64),m=new THREE.MeshStandardMaterial({color:9670284,roughness:.6,metalness:.1,opacity:1,transparent:!1}),m=new THREE.MeshStandardMaterial({color:6710886,roughness:.2,metalness:.95,envMap:t,envMapIntensity:1}),(E=new THREE.Mesh(h,m)).position.set(0,2,0),E.receiveShadow=!1,E.castShadow=!0,d.add(E),v.push(E),h=new THREE.BoxGeometry(3,3,3),m=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(M=new THREE.Mesh(h,m)).position.set(0,1.5,-20),M.receiveShadow=!1,M.castShadow=!0,d.add(M),b.push(M);var n=y(f.BUMP),a=y(f.LIGHT),o=y(f.DIFFUSE),r=y(f.LIGHT);h=new THREE.CircleGeometry(45,128),m=new THREE.MeshStandardMaterial({color:3091755,map:o,bumpMap:n,bumpScale:.03,lightMapIntensity:4,roughness:1,roughnessMap:a,metalness:1,metalnessMap:r}),(T=new THREE.Mesh(h,m)).position.set(0,.1,0),T.rotation.set(-Math.PI/2,0,0),T.receiveShadow=!1,T.castShadow=!0,o=(new THREE.TextureLoader).load("img/disc.jpg"),h=new THREE.CircleGeometry(12,128),m=new THREE.MeshStandardMaterial({color:16777215,map:o,roughness:1,metalness:0});var i=new THREE.Mesh(h,m);i.position.set(0,0,1),T.add(i),d.add(T),(l=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),l.shadowMap.enabled=!0,l.gammaInput=!0,l.gammaOutput=!0,l.shadowMap.type=THREE.PCFSoftShadowMap,document.querySelector(".section-scene").appendChild(l.domElement),(c=new THREE.DragControls(b,s,l.domElement)).addEventListener("dragstart",function(e){p&&(p.enabled=!1),g.start(),g.theremin.start()}),c.addEventListener("drag",function(e){var t=M.position.clone(),n=E.position.clone(),a=t.sub(n);g.theremin.drag(a),TweenLite.to(g,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){g.setSpeed(g.speed)}})}),c.addEventListener("dragend",function(e){p&&(p.enabled=!0),TweenLite.to(g,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){g.setSpeed(g.speed)},onComplete:function(){g.theremin.stop(),g.stop()}})})}function y(e){var t=2048,n=t,a=t,o=document.createElement("canvas");o.width=n,o.height=a;var r,i,s=o.getContext("2d"),d=n/2,l=a/2;function p(e,t,n,a){s.beginPath(),s.arc(d,l,e,0,2*Math.PI,!1),t&&(s.fillStyle=t,s.fill()),n&&(s.lineWidth=a,s.strokeStyle=n,s.stroke()),s.closePath()}if(e===f.DIFFUSE&&(i=307.2,s.fillStyle="#2f2d2b",s.rect(0,0,n,a),s.fill(),p(i,"#332d2a")),e===f.METAL&&(i=307.2,s.fillStyle="#000000",s.rect(0,0,n,a),s.fill(),p(i,"#f0f0f0")),e===f.LIGHT){r=307.2,i=1013.76,s.fillStyle="#000000",s.rect(0,0,n,a),s.fill();for(var c=r;c<i;c+=10+30*Math.random())p(c+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",10+40*Math.random())}if(e===f.BUMP){r=307.2,i=1013.76,s.fillStyle="#000000",s.rect(0,0,n,a),s.fill();for(c=r;c<i;c+=2)p(c+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",.6)}return new THREE.CanvasTexture(o)}function t(){requestAnimationFrame(t),E.rotation.y+=.06*g.speed,T.rotation.z+=.06*g.speed,u.position.x+=(-1*M.position.x-u.position.x)/20,u.position.z+=(-1*M.position.z-u.position.z)/20,l.render(d,s)}}();
//# sourceMappingURL=app.min.js.map
