!function(){"use strict";if(Detector.webgl){var o,i,r,t,a,s,n,d,p,l,h,E,c,w,m,u,T,M,g,f,R=!1,v=1024,H=0,y={DIFFUSE:0,BUMP:1,LIGHT:2,ALPHA:3},S=window.performance||Date,b=[],L=(new Tone.Volume(-100),function(){var i=new Tone.Filter({type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0}).toMaster(),t=new Tone.Player({url:"audio/The-Blinding-Shiver-128.[mp3|ogg]",loop:!0,playbackRate:.1}).toMaster().sync().start("0");Tone.Transport.timeSignature=4,Tone.Transport.bpm.value=98,Tone.Transport.loop=!0,Tone.Transport.loopStart="0",Tone.Transport.loopEnd="98:5";var r=new Tone.DuoSynth({vibratoAmount:.5,vibratoRate:5,portamento:.1,harmonicity:1.005,volume:1,voice0:{volume:-2,oscillator:{type:"sawtooth"},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.25,sustain:.4,release:1.2},filterEnvelope:{attack:.001,decay:.05,sustain:.3,release:2,baseFrequency:100,octaves:4}},voice1:{volume:-10,oscillator:{type:"sawtooth"},filter:{Q:2,type:"bandpass",rolloff:-12},envelope:{attack:.25,decay:4,sustain:.1,release:.8},filterEnvelope:{attack:.05,decay:.05,sustain:.7,release:2,baseFrequency:5e3,octaves:-1.5}}}).toMaster();r.notes=["C2","E2","G2","A2","C3","D3","E3","G3","A3","B3","C4","D4","E4","G4","A4","B4","C5"],r.note=r.notes[0];var s={effects:{filter:i},instruments:{player:t,synth:r},start:function(){Tone.Transport.start("+0.1")},stop:function(){Tone.Transport.pause()},theremin:{drag:function(e){e=e.divideScalar(10);var t=Math.abs(e.x),a=Math.abs(e.z);t=Math.max(0,Math.min(1,t)),a=Math.max(0,Math.min(1,a));var n=Math.max(0,Math.min(r.notes.length-1,Math.round(a*r.notes.length-1))),o=r.notes[r.notes.length-1-n];r.note!==o&&(r.note=o,r.setNote(o)),r.vibratoAmount.value=10*t,1===s.speed&&i.set("detune",2e4*t-1e4)},start:function(){r.triggerAttack(r.note)},stop:function(){r.triggerRelease()}},speed:0,setSpeed:function(e){e=Math.max(0,Math.min(1,e)),t.set("playbackRate",.1+.99*e),i.set("detune",1e4*e-1e4)}};return s}()),P=[],x=[];e(),F(),window.addEventListener("resize",function(){o.resize(),r.setSize(window.innerWidth,window.innerHeight)},!1)}else Detector.addGetWebGLMessage();function e(){var e;(i=new THREE.Scene).add(new THREE.AmbientLight(4473924)),(e=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,.01,1e3)).position.set(0,300,0),e.lookAt(0,0,0),e.resize=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()},window.camera=e,i.add(e),o=e,(s=new THREE.SpotLight(16711422,1,1e3,1,1,.1)).position.set(35,50,-35),s.castShadow=!0,s.shadow.mapSize.width=v,s.shadow.mapSize.height=v,s.shadow.camera.near=.1,s.shadow.camera.far=500,s.shadow.radius=1.0001,i.add(s),n=new THREE.PlaneGeometry(500,500,25,25),d=new THREE.ShadowMaterial({opacity:.25,side:THREE.DoubleSide}),(p=new THREE.Mesh(n,d)).rotation.set(-Math.PI/2,0,0),p.position.set(0,0,-1),p.receiveShadow=!0,i.add(p),(u=(new THREE.TextureLoader).load("img/envmap-sm.jpg")).mapping=THREE.EquirectangularReflectionMapping,u.magFilter=THREE.LinearFilter,u.minFilter=THREE.LinearMipMapLinearFilter,n=new THREE.SphereGeometry(1,64,64),d=new THREE.MeshStandardMaterial({color:6710886,roughness:.2,metalness:.95,envMap:u,envMapIntensity:1}),(l=new THREE.Mesh(n,d)).position.set(0,1,0),l.receiveShadow=!1,l.castShadow=!0,i.add(l),P.push(l),n=new THREE.BoxGeometry(3,3,3),d=new THREE.MeshStandardMaterial({color:16777215,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(h=new THREE.Mesh(n,d)).position.set(55,1.5,0),h.receiveShadow=!1,h.castShadow=!0,n=new THREE.RingGeometry(3,3.3,32,1),d=new THREE.MeshStandardMaterial({color:4143928,roughness:.9,metalness:.1,opacity:0,transparent:!0}),(E=new THREE.Mesh(n,d)).rotation.set(-Math.PI/2,0,0),E.receiveShadow=!1,E.castShadow=!1,h.add(E),i.add(h),x.push(h),T=G(y.BUMP),g=G(y.LIGHT,512),M=G(y.DIFFUSE,512),f=G(y.LIGHT,512),n=new THREE.RingGeometry(12.1,45,64,4),d=new THREE.MeshStandardMaterial({color:3091755,map:M,bumpMap:T,bumpScale:.02,envMap:u,roughness:1,roughnessMap:g,metalness:1,metalnessMap:f}),(w=new THREE.Mesh(n,d)).position.set(0,.1,0),w.rotation.set(-Math.PI/2,0,0),w.receiveShadow=!0,w.castShadow=!0,M=(new THREE.TextureLoader).load("img/disc.jpg"),n=new THREE.RingGeometry(1.3,12,64,4),d=new THREE.MeshStandardMaterial({color:16777215,map:M,roughness:.6,metalness:.4}),(m=new THREE.Mesh(n,d)).position.set(0,0,0),m.receiveShadow=!0,m.castShadow=!0,w.add(m),i.add(w),M=(new THREE.TextureLoader).load("img/cover.jpg"),n=new THREE.PlaneGeometry(90,90,32,32),d=new THREE.MeshStandardMaterial({color:15723496,map:M,roughness:.6,metalness:.1,opacity:1,transparent:!1}),(c=new THREE.Mesh(n,d)).rotation.set(-Math.PI/2,0,0),c.position.set(-25,2,0),c.receiveShadow=!0,c.castShadow=!0,i.add(c),(r=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.gammaInput=!0,r.gammaOutput=!0,r.shadowMap.type=THREE.PCFSoftShadowMap,document.querySelector(".section-scene").appendChild(r.domElement),(a=new THREE.DragControls(x,o,r.domElement)).addEventListener("dragstart",function(e){t&&(t.enabled=!1),L.start(),L.theremin.start()}),a.addEventListener("drag",function(e){var t=h.position.clone(),a=l.position.clone(),n=t.sub(a);L.theremin.drag(n),0===L.speed&&TweenLite.to(L,.5,{speed:1,ease:Power2.easeOut,onUpdate:function(){L.setSpeed(L.speed)}})}),a.addEventListener("dragend",function(e){t&&(t.enabled=!0),0!==L.speed&&TweenLite.to(L,.5,{speed:0,ease:Power2.easeOut,onUpdate:function(){L.setSpeed(L.speed)},onComplete:function(){L.theremin.stop(),L.stop()}})})}function F(e){requestAnimationFrame(F);var t=.0575959*60/(function(){var e=S.now();for(;0<b.length&&b[0]<=e-1e3;)b.shift();return b.push(e),b.length}()||60);if(E){var a=Math.abs(Math.sin(.001*e))*(1-L.speed);E.material.opacity=a,E.scale.set(1+.5*a,1+.5*a,1+.5*a)}if(c.position.x=-25-90*L.speed,0<L.speed)l.rotation.y+=t*L.speed,w.rotation.z+=t*L.speed,h.rotation.y+=t*L.speed,s.position.x+=(-1*h.position.x-s.position.x)/20,s.position.z+=(-1*h.position.z-s.position.z)/20;else{h.position.x+=(55-h.position.x)/20,h.position.z+=(0-h.position.z)/20;var n=Math.round(h.rotation.y/Math.PI*2)*Math.PI/2;h.rotation.y+=(n-h.rotation.y)/20}r.render(i,o)}function G(e,t){var a=t=t||2048,n=t,o=document.createElement("canvas");o.width=a,o.height=n;var i,r=o.getContext("2d"),s=a/2,d=n/2,p=t/2*.3,l=t/2*.98;function h(e,t,a,n){r.beginPath(),r.arc(s,d,e,0,2*Math.PI,!1),t&&(r.fillStyle=t,r.fill()),a&&(r.lineWidth=n,r.strokeStyle=a,r.stroke()),r.closePath()}if(e===y.DIFFUSE&&(r.fillStyle="#2f2d2b",r.rect(0,0,a,n),r.fill(),h(p,"#332d2a")),e===y.LIGHT)for(r.fillStyle="#000000",r.rect(0,0,a,n),r.fill(),i=p;i<l;i+=10+30*Math.random()){var E=i+.2*Math.random(),c=(20+30*Math.random())/2;c=2*Math.min(c,l-E-1),h(E,null,"rgba(255, 255, 255, "+.5*Math.random()+")",c)}if(e===y.BUMP)for(r.fillStyle="#000000",r.rect(0,0,a,n),r.fill(),i=p;i<l;i+=2)h(i+.2*Math.random(),null,"rgba(255, 255, 255, "+.5*Math.random()+")",.6);var w=new THREE.CanvasTexture(o,THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearMipMapLinearFilter,THREE.RGBFormat,THREE.UnsignedByteType,2);return R&&(o.setAttribute("style","top:"+256*H+"px;"),document.body.appendChild(o)),H++,w}}();
//# sourceMappingURL=app.min.js.map
